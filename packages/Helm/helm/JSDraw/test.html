<html>

<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Pistoia HELM</title>
    <script type='text/javascript' src="https://ajax.googleapis.com/ajax/libs/dojo/1.10.4/dojo/dojo.js"></script>
    <script type='text/javascript' src="Scilligence.JSDraw2.Lite.js"></script>
    <script type="text/javascript" src='Scilligence.JSDraw2.Resources.js'></script>
    <script type='text/javascript' src='Pistoia.HELM-uncompressed.js'></script>
</head>

<body>

<div id='Div2'></div>
<script type="text/javascript">
  function sortObjectByKeys(o) {
    return Object.keys(o).sort().reduce((r, k) => (r[k] = o[k], r), {});
  }
  dojo.ready(function () {
    /*let editor = new JSDraw2.Editor("Div2", {viewonly: true});
    editor.setHelm('RNA1{R(U)P.R(T)P.R(G)P.R(C)P.R(A)}$$$$');
    console.log(editor.getMolfile());*/
    
    var jsd = new JSDraw("Div2", { width: 800, height: 400, skin: "w8", viewonly: true });
    /*console.log(org.helm.webeditor.Monomers.bases);
    console.log(org.helm.webeditor.Monomers.linkers);
    console.log(org.helm.webeditor.Monomers.aas);
    console.log(org.helm.webeditor.Monomers.chems);
    console.log(org.helm.webeditor.Monomers.blobs);*/
    /*var mol = jsd.getMolfile();
    var m = new JSDraw2.Mol();
    console.log(JSDraw2.FormulaParser.getAtomStats(m.setMolfile(mol)));*/
    //console.log(new JSDraw2.Editor("Div2", {viewonly: true}).getMolfile());
    /*let MONOMER_MANAGER_MAP = {
      'id': 'symbol', 
      'n': 'name',
      'na': 'naturalAnalog',
      'm': 'molfile', 
      'rs': 'rgroups',
      'at': 'position'
    }
    var type = [scil.helm.Monomers.bases];
    console.log(type[0]);  
    const types = Object.keys(org.helm.webeditor.monomerTypeList());
    const monomers = [];
    for (var i = 0; i < types.length; i++) {
      monomers.push(new scil.helm.Monomers.getMonomerSet(types[i]));
      Object.keys(monomers[i]).forEach(k => {
        //console.log(monomers[i][k]);
        Object.keys(MONOMER_MANAGER_MAP).forEach(field => {
          MONOMER_MANAGER_MAP[field] = monomers[i][k][field];
        })
        console.log(MONOMER_MANAGER_MAP);
      });
    }*/
    const MONOMER_MANAGER_MAP = {
    'id': 'symbol', 
    'n': 'name',
    'na': 'naturalAnalog',
    'm': 'molfile', 
    'rs': 'rgroups',
    'at': 'positions'
  }
  let keys = ['id', 'n', 'na', 'type', 'mt', 'm', 'rs', 'at'];
  let values = ['1', '3', '5', '6', '7', '8', '9', '2'];
  var result = {};
keys.forEach((key, i) => result[key] = values[i]);
console.log(result);

  let m = {};
    const types = Object.keys(org.helm.webeditor.monomerTypeList());
  const monomers = [];
  const monomer_names = [];
  for (var i = 0; i < types.length; i++) {
    //@ts-ignore
    let monomer = new scil.helm.Monomers.getMonomerSet(types[i]);
    Object.keys(monomer).forEach(k => {
      Object.keys(MONOMER_MANAGER_MAP).forEach(field => {
        m[field] = monomer[k][field] ?? '';
      });
      console.log(m);
      m = {};
    });
  }
  org.helm.webeditor.Monomers.addOneMonomer({'at': {R1: 'H'}, 'id': 'ggt', 'm': '"\n  Marvin  06150820502D          \n\n 12 13  0  0  0  0            999 V2000\n   -1.7509   -3.8489    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n   -1.0364   -4.2614    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n   -1.0364   -5.0864    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n   -1.7509   -5.4989    0.0000 N   0  0  0  0  0  0  0  0  0  0  0  0\n   -2.4654   -5.0864    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n   -2.4654   -4.2614    0.0000 N   0  0  0  0  0  0  0  0  0  0  0  0\n   -0.3220   -5.4989    0.0000 N   0  0  0  0  0  0  0  0  0  0  0  0\n    0.3925   -5.0864    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    0.3925   -4.2614    0.0000 N   0  0  0  0  0  0  0  0  0  0  0  0\n   -1.7509   -3.0239    0.0000 O   0  0  0  0  0  0  0  0  0  0  0  0\n   -3.1798   -5.4989    0.0000 N   0  0  0  0  0  0  0  0  0  0  0  0\n   -0.3220   -6.3239    0.0000 R#  0  0  0  0  0  0  0  0  0  0  0  0\n  1 10  2  0  0  0  0\n  1  6  1  0  0  0  0\n  1  2  1  0  0  0  0\n  9  2  1  0  0  0  0\n  2  3  2  0  0  0  0\n  7  3  1  0  0  0  0\n  3  4  1  0  0  0  0\n  4  5  2  0  0  0  0\n  5  6  1  0  0  0  0\n  5 11  1  0  0  0  0\n  7  8  1  0  0  0  0\n  7 12  1  0  0  0  0\n  8  9  2  0  0  0  0\nM  RGP  1  12   1\nM  END\n\n$$$$\n', 'mt': '', 'n': 'Guanine', 'na': 'G', 'rs': 1, 'type': ''});
  console.log(org.helm.webeditor.Monomers.bases);
    console.log(org.helm.webeditor.Monomers.linkers);
    console.log(org.helm.webeditor.Monomers.aas);
    console.log(org.helm.webeditor.Monomers.chems);
    console.log(org.helm.webeditor.Monomers.blobs);
})

</script>
</body>
</html>